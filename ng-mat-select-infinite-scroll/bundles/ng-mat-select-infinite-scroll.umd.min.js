!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/material/select"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-mat-select-infinite-scroll",["exports","@angular/core","@angular/material/select","rxjs/operators","rxjs"],t):t((e=e||self)["ng-mat-select-infinite-scroll"]={},e.ng.core,e.ng.material.select,e.rxjs.operators,e.rxjs)}(this,(function(e,t,r,n,i){"use strict";var o=function(){function e(e,n){this.matSelect=e,this.ngZone=n,this.threshold="15%",this.debounceTime=150,this.infiniteScroll=new t.EventEmitter,this.thrPx=0,this.thrPc=0,this.singleOptionHeight=r.SELECT_ITEM_HEIGHT_EM,this.destroyed$=new i.Subject}return e.prototype.ngOnInit=function(){this.evaluateThreshold()},e.prototype.ngAfterViewInit=function(){var e=this;this.matSelect.openedChange.pipe(n.takeUntil(this.destroyed$)).subscribe((function(t){t&&(e.panel=e.matSelect.panel.nativeElement,e.singleOptionHeight=e.getSelectItemHeightPx(),e.registerScrollListener())}))},e.prototype.ngOnDestroy=function(){this.destroyed$.next(!0),this.destroyed$.complete()},e.prototype.evaluateThreshold=function(){this.threshold.lastIndexOf("%")>-1?(this.thrPx=0,this.thrPc=parseFloat(this.threshold)/100):(this.thrPx=parseFloat(this.threshold),this.thrPc=0)},e.prototype.registerScrollListener=function(){var e=this;i.fromEvent(this.panel,"scroll").pipe(n.takeUntil(this.destroyed$),n.debounceTime(this.debounceTime),n.tap((function(t){e.handleScrollEvent(t)}))).subscribe()},e.prototype.handleScrollEvent=function(e){var t=this;this.ngZone.runOutsideAngular((function(){if(!t.complete){var r=t.matSelect.options.length,n=t.singleOptionHeight*r,i=0!==t.thrPc?n*t.thrPc:t.thrPx;t.panel.clientHeight+e.target.scrollTop+i>=n&&t.ngZone.run((function(){return t.infiniteScroll.emit()}))}}))},e.prototype.getSelectItemHeightPx=function(){return parseFloat(getComputedStyle(this.panel).fontSize)*r.SELECT_ITEM_HEIGHT_EM},e}();o.decorators=[{type:t.Directive,args:[{selector:"[msInfiniteScroll]"}]}],o.ctorParameters=function(){return[{type:r.MatSelect},{type:t.NgZone}]},o.propDecorators={threshold:[{type:t.Input}],debounceTime:[{type:t.Input}],complete:[{type:t.Input}],infiniteScroll:[{type:t.Output}]};var s=function(){};s.decorators=[{type:t.NgModule,args:[{declarations:[o],imports:[r.MatSelectModule],exports:[o]}]}],e.MatSelectInfiniteScrollDirective=o,e.MatSelectInfiniteScrollModule=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-mat-select-infinite-scroll.umd.min.js.map